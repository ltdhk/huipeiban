# CLAUDE.md

此文件为 Claude Code (claude.ai/code) 在此代码库中工作时提供指导。

## 通用编程原则

### 代码质量
- 编写清晰、可读、可维护的代码
- 注释和日志全部使用简体中文
- 遵循 DRY (Don't Repeat Yourself) 原则
- 保持函数和方法简短且专注于单一职责
- 使用有意义的变量和函数命名
- 添加必要的注释解释复杂逻辑
- 避免过度工程化，保持代码简洁

### 错误处理
- 始终处理可能的错误和异常情况
- 提供有意义的错误消息
- 在适当的层级捕获和处理异常
- 记录错误日志以便调试
- 验证用户输入和外部数据

### 安全性
- 永远不要在代码中硬编码敏感信息（API密钥、密码等）
- 使用环境变量存储配置信息
- 验证和清理所有用户输入
- 遵循最小权限原则
- 定期更新依赖项以修复安全漏洞


## 项目概述

CareLink 是一个多组件应用程序，具有以下结构：

- **Backend/**: 后端应用程序/API（尚未实现）
- **MiniApp/**: 前端小程序应用（尚未实现）
- **Script/**: 实用脚本和自动化工具（尚未实现）
- **Docs/**: 项目文档（尚未实现）

## 当前状态

这是一个**新初始化的项目**，目前只有目录结构。尚未添加任何代码、依赖项或配置文件。

## 开发环境设置

### 先决条件
*根据选择的技术栈确定*

### 命令
*项目使用特定技术初始化后添加*

## 架构

### 计划的组件
项目结构建议将以下部分分离：
- 后端服务（可能是 API 服务器）
- 前端应用程序（小程序/Web 界面）
- 支持脚本和文档

### 技术栈
*待确定 - 目前尚无 package.json、requirements.txt 或其他配置文件*

## 项目初始化的后续步骤

在开始开发之前，需要完成以下决策和设置步骤：

1. **定义 Backend 和 MiniApp 的技术栈**
2. **初始化依赖管理**（package.json、requirements.txt、go.mod 等）
3. **配置开发环境**
4. **在每个组件目录中创建 README 文件**
5. **初始化版本控制**（git 仓库）
6. **定义数据库架构**和数据模型
7. **记录 API 端点**和通信模式

## Git 工作流程

### 提交规范
使用约定式提交(Conventional Commits)格式:
```
<type>(<scope>): <subject>

<body>

<footer>
```

**类型(type):**
- `feat`: 新功能
- `fix`: 错误修复
- `docs`: 文档更新
- `style`: 代码格式(不影响代码运行)
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具变动

**示例:**
```
feat(auth): 添加 OAuth2 登录支持

实现了 Google 和 GitHub 的 OAuth2 登录流程
- 添加 OAuth2 配置
- 创建回调处理器
- 更新用户模型

Closes #123
```

### 分支策略
- `main/master`: 生产环境代码
- `develop`: 开发分支
- `feature/*`: 功能分支
- `hotfix/*`: 紧急修复分支
- `release/*`: 发布分支

## 文档要求

### 代码文档
- 为所有公共函数、类和模块编写文档字符串
- 说明参数、返回值和可能的异常
- 提供使用示例

### README.md 必须包含
- 项目简介
- 功能特性
- 安装说明
- 使用示例
- 配置说明
- 贡献指南
- 许可证信息

## 性能优化

### 通用原则
- 先保证正确性，再优化性能
- 使用分析工具识别性能瓶颈
- 避免过早优化
- 使用缓存减少重复计算
- 选择合适的数据结构和算法
- 考虑并发和异步处理

### 数据库
- 为查询字段添加索引
- 避免 N+1 查询问题
- 使用连接池
- 批量操作代替循环单条
- 定期优化和分析查询

## API 设计

### RESTful API 规范
```
GET    /api/v1/users          # 获取用户列表
GET    /api/v1/users/:id      # 获取单个用户
POST   /api/v1/users          # 创建用户
PUT    /api/v1/users/:id      # 更新用户
DELETE /api/v1/users/:id      # 删除用户
```

### API 响应格式
```json
{
  "success": true,
  "data": {
    "id": "123",
    "name": "张三"
  },
  "message": "操作成功",
  "timestamp": "2025-11-11T12:00:00Z"
}
```

### 错误响应
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "输入验证失败",
    "details": [
      {
        "field": "email",
        "message": "邮箱格式不正确"
      }
    ]
  },
  "timestamp": "2025-11-11T12:00:00Z"
}
```

## 依赖管理

### 原则
- 保持依赖项最新
- 定期审查和更新依赖
- 移除未使用的依赖
- 固定版本号以保证可重现构建
- 审查依赖的安全漏洞

### 工具
- Python: `pip-audit`, `safety`
- JavaScript: `npm audit`, `snyk`
- Go: `govulncheck`

## 注意事项

- 项目结构和技术选择确定后，应更新此 CLAUDE.md 文件
- 建立具体的构建、测试和运行命令后添加
- 实施架构决策和模式时进行记录
