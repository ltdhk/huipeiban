<view class="edit-container">
  <view class="form">
    <!-- 姓名 -->
    <view class="form-item required">
      <text class="label">姓名</text>
      <input
        class="input"
        type="text"
        placeholder="请输入姓名"
        value="{{formData.name}}"
        data-field="name"
        bindinput="onInputChange"
      />
    </view>

    <!-- 性别 -->
    <view class="form-item required">
      <text class="label">性别</text>
      <picker
        mode="selector"
        range="{{genderOptions}}"
        range-key="label"
        value="{{formData.gender === 'male' ? 0 : 1}}"
        bindchange="onGenderChange"
      >
        <view class="picker">
          {{formData.gender === 'male' ? '男' : '女'}}
        </view>
      </picker>
    </view>

    <!-- 出生日期 -->
    <view class="form-item">
      <text class="label">出生日期</text>
      <picker
        mode="date"
        value="{{formData.birth_date}}"
        bindchange="onDateChange"
      >
        <view class="picker">
          {{formData.birth_date || '请选择出生日期'}}
        </view>
      </picker>
    </view>

    <!-- 联系电话 -->
    <view class="form-item">
      <text class="label">联系电话</text>
      <input
        class="input"
        type="number"
        placeholder="请输入联系电话"
        value="{{formData.phone}}"
        data-field="phone"
        bindinput="onInputChange"
      />
    </view>

    <!-- 关系 -->
    <view class="form-item">
      <text class="label">与我的关系</text>
      <picker
        mode="selector"
        range="{{relationshipOptions}}"
        range-key="label"
        bindchange="onRelationshipChange"
      >
        <view class="picker">
          {{relationshipOptions.find(item => item.value === formData.relationship).label}}
        </view>
      </picker>
    </view>

    <!-- 病史摘要 -->
    <view class="form-item">
      <text class="label">病史摘要</text>
      <textarea
        class="textarea"
        placeholder="请输入病史摘要（选填）"
        value="{{formData.medical_history}}"
        data-field="medical_history"
        bindinput="onInputChange"
        maxlength="500"
      />
    </view>

    <!-- 过敏史 -->
    <view class="form-item">
      <text class="label">过敏史</text>
      <textarea
        class="textarea"
        placeholder="请输入过敏史（选填）"
        value="{{formData.allergies}}"
        data-field="allergies"
        bindinput="onInputChange"
        maxlength="500"
      />
    </view>

    <!-- 特殊需求 -->
    <view class="form-item">
      <text class="label">特殊需求</text>
      <textarea
        class="textarea"
        placeholder="请输入特殊需求（选填）"
        value="{{formData.special_needs}}"
        data-field="special_needs"
        bindinput="onInputChange"
        maxlength="500"
      />
    </view>

    <!-- 设为默认 -->
    <view class="form-item switch-item">
      <text class="label">设为默认就诊人</text>
      <switch
        checked="{{formData.is_default}}"
        bindchange="onDefaultChange"
        color="#667eea"
      />
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-wrapper">
    <button
      class="submit-btn"
      bindtap="submitForm"
      disabled="{{submitting}}"
    >
      {{submitting ? '保存中...' : '保存'}}
    </button>
  </view>
</view>
